// The toggle
jQuery(document).ready(function() {
    
    jQuery("#grid").click(function() {
        jQuery(this).addClass("active");
        jQuery("#list").removeClass("active");
        jQuery.cookie("gridcookie", "grid", {
            path: "/"
        });
        jQuery("ul.row.list-products").fadeOut(300, function() {
            jQuery(this).addClass("grid").removeClass("list").fadeIn(300);
        });
        return false;
    });

    jQuery("#list").click(function() {
        jQuery(this).addClass("active");
        jQuery("#grid").removeClass("active");
        jQuery.cookie("gridcookie", "list", {
            path: "/"
        });
        jQuery("ul.row.list-products").fadeOut(300, function() {
            jQuery(this).removeClass("grid").addClass("list").fadeIn(300);
        });
        return false;
    });

    jQuery.cookie("gridcookie") && jQuery("ul.row.list-products, #view-mode-switcher").addClass(jQuery.cookie("gridcookie"));

    if ( jQuery.cookie("gridcookie") == null ) {
        jQuery(".view-mode-switcher #grid").addClass("active");
        jQuery("ul.row.list-products").addClass("grid").removeClass("list").fadeIn(300);
    }
    else if ( jQuery.cookie("gridcookie") == "grid") {
        jQuery(".view-mode-switcher #grid").addClass("active");
        jQuery(".view-mode-switcher #list").removeClass("active");
    }
    else if (jQuery.cookie("gridcookie") == "list") {
        jQuery(".view-mode-switcher #list").addClass("active");
        jQuery(".view-mode-switcher #grid").removeClass("active");
    }

    jQuery("#view-mode-switcher a").click(function(e) {
        e.preventDefault();
    })

});
